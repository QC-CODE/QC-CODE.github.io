<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Net Rake Comparison</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fffaf0;
      padding: 20px;
    }

    .column span {
      /* display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column; */
      display: block;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    .options {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tabs {
      display: inline-flex;
      border: 1px solid #ccc;
      border-radius: 6px;
      overflow: hidden;
    }

    .tab {
      padding: 8px 16px;
      cursor: pointer;
      background: #f6f6f6;
      border-right: 1px solid #ccc;
      font-weight: bold;
    }

    .tab:last-child {
      border-right: none;
    }

    .tab.active {
      background: #f6c547;
      color: #000;
    }

    .players,
    .stake {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    hr,
    hr.wp-block-separator {
      border-top: 7.5px dotted #e9b949;
      border-bottom: none;
      margin: 30px 0;
      clear: both;
    }

    .wp-block-separator {
      border: 1px solid;
      border-left: none;
      border-right: none;
    }

    .players button {
      padding: 5px 10px;
      border: 1px solid #ccc;
      background: #f6f6f6;
      cursor: pointer;
      border-radius: 4px;
    }

    .players button.active {
      background: #f6c547;
      font-weight: bold;
    }

    .stake select {
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    th,
    td {
      border: 1px solid #ddd;
      padding: 8px 12px;
      text-align: center;
    }

    th {
      background: #f6c547;
      color: #333;
      font-weight: bold;
    }

    tr:nth-child(even) {
      background: #f9f9f9;
    }

    tr:hover {
      background: #f1f1f1;
    }

    .rank {
      font-weight: bold;
    }

    .network {
      text-align: left;
    }
  </style>
</head>

<body>
  <div id="app">

    <h2>Net Rake Comparison</h2>

    <!-- Lựa chọn phía trên -->
    <div class="options">
      <!-- Tabs -->
      <div class="tabs">
        <div @click="handleClicktype(item)" v-for="item in listtype" :key="item"
          :class="type ==item ?'active tab':'tab'">{{object[item]}}</div>

      </div>

      <!-- Players -->
      <div class="players">
        <span>Players:</span>
        <button @click="handleClick(item)" v-for="item in listplayers" :key="item"
          :class="players ==item ?'active':''">{{item}}</button>

      </div>

      <!-- Stake -->
      <div class="stake">
        <span>Limit:</span>
        <select @change="test" v-model="selectedRake">
          <option v-for="item in rakeOptions" :key="item.value" :value="item.value">{{item.text}}</option>

        </select>
      </div>
    </div>


    <!-- Bảng -->

    <table>
      <thead>
        <tr>
          <th>Rank</th>
          <th>Network</th>
          <th>Rake / 100 hands</th>
          <th>Net Rake</th>
          <th>Rake Rules</th>
          <th>Operators</th>
        </tr>
      </thead>
      <tbody>
        <!-- v-for="(item, index) in data" :key="item.id || index" -->
        <tr v-for="(item, index) in data" :key="index">
          <td class="rank">{{item.rank}}</td>
          <td class="network">{{item.network}}</td>
          <td>{{item.currency}} ( {{item.bigBlinds}} )</td>
          <td>{{item.netRake}}</td>
          <td>{{item.rakePercentage}}<br>{{item.rakeCap}}</td>
          <td>{{item.operators}}</td>
        </tr>




      </tbody>
    </table>

    <p style="text-align:center; margin-top:15px; font-size:14px; color:#666;">
      Online poker rake comparison for {{limit}} {{object[type] }} {{players}} players
    </p>

    <hr class="wp-block-separator has-alpha-channel-opacity">
    <div class="chart-area" id="rake-chart">
      <svg width="auto" height="500" aria-label="A chart." style="overflow: hidden;">
        <defs id="_ABSTRACT_RENDERER_ID_0">
          <clipPath id="_ABSTRACT_RENDERER_ID_1">
            <rect x="45" y="75" width="810" height="350"></rect>
          </clipPath>
          <filter id="_ABSTRACT_RENDERER_ID_2">
            <feGaussianBlur in="SourceAlpha" stdDeviation="2"></feGaussianBlur>
            <feOffset dx="1" dy="1"></feOffset>
            <feComponentTransfer>
              <feFuncA type="linear" slope="0.1"></feFuncA>
            </feComponentTransfer>
            <feMerge>
              <feMergeNode></feMergeNode>
              <feMergeNode in="SourceGraphic"></feMergeNode>
            </feMerge>
          </filter>
        </defs>
        <g><text text-anchor="start" x="45" y="49.9" font-family="Arial" font-size="14" font-weight="bold" stroke="none"
            stroke-width="0" fill="#000000">Net Rake for {{limit}} {{object[type] }} ({{players}} players)</text>
          <rect x="45" y="38" width="810" height="14" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff">
          </rect>
        </g>
        <g>
          <rect x="45" y="75" width="810" height="350" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff">
          </rect>
          <g>
            <g>
              <rect x="45" y="424" width="810" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect>
              <rect x="45" y="354" width="810" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect>
              <rect x="45" y="284" width="810" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect>
              <rect x="45" y="215" width="810" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect>
              <rect x="45" y="145" width="810" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect>
              <rect x="45" y="75" width="810" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect>
              <rect x="45" y="389" width="810" height="1" stroke="none" stroke-width="0" fill="#ebebeb"></rect>
              <rect x="45" y="319" width="810" height="1" stroke="none" stroke-width="0" fill="#ebebeb"></rect>
              <rect x="45" y="250" width="810" height="1" stroke="none" stroke-width="0" fill="#ebebeb"></rect>
              <rect x="45" y="180" width="810" height="1" stroke="none" stroke-width="0" fill="#ebebeb"></rect>
              <rect x="45" y="110" width="810" height="1" stroke="none" stroke-width="0" fill="#ebebeb"></rect>
            </g>
            <g>
              <rect v-for="(item, index) in data" :key="item.rank" :x="57 +index*62" :y="item.y" width="39"
                :height="item.height" stroke="#7fff80" stroke-width="1" fill="#7fff80"></rect>
              <!-- <rect x="120" y="163" width="38" height="261" stroke="#96ff80" stroke-width="1" fill="#96ff80"></rect>
              <rect x="182" y="148" width="38" height="276" stroke="#c7ff80" stroke-width="1" fill="#c7ff80"></rect>
              <rect x="244" y="148" width="39" height="276" stroke="#c7ff80" stroke-width="1" fill="#c7ff80"></rect>
              <rect x="306" y="135" width="39" height="289" stroke="#f3ff80" stroke-width="1" fill="#f3ff80"></rect>
              <rect x="369" y="135" width="38" height="289" stroke="#f3ff80" stroke-width="1" fill="#f3ff80"></rect>
              <rect x="431" y="135" width="38" height="289" stroke="#f3ff80" stroke-width="1" fill="#f3ff80"></rect>
              <rect x="493" y="126" width="38" height="298" stroke="#ffee80" stroke-width="1" fill="#ffee80"></rect>
              <rect x="555" y="115" width="39" height="309" stroke="#ffcb80" stroke-width="1" fill="#ffcb80"></rect>
              <rect x="617" y="115" width="39" height="309" stroke="#ffca80" stroke-width="1" fill="#ffca80"></rect>
              <rect x="680" y="115" width="38" height="309" stroke="#ffca80" stroke-width="1" fill="#ffca80"></rect>
              <rect x="742" y="115" width="38" height="309" stroke="#ffc980" stroke-width="1" fill="#ffc980"></rect>
              <rect x="804" y="92" width="39" height="332" stroke="#ff7f80" stroke-width="1" fill="#ff7f80"></rect> -->
            </g>
            <g>
              <rect x="45" y="424" width="810" height="1" stroke="none" stroke-width="0" fill="#333333"></rect>
            </g>
            <g>
              <rect v-for="(item, index) in data" :x="76 +index*62" :y="item.y-13" width="1" height="12" stroke="none"
                stroke-width="0" fill="#999999"></rect>

            </g>
          </g>
          <g></g>
          <g>
            <g v-for="(item, index) in data"><text text-anchor="end" :x="79+ index*62" y="438.24352447854375"
                font-family="Arial" font-size="14"
                :transform="'rotate(-30 ' + (79 + index * 62) + ' 438.24352447854375)'" stroke="none" stroke-width="0"
                fill="#222222">{{item.network}}</text></g>
          </g>
          <g>
            <g v-for="(item, index) in data" :key="item.rank">
              <g>
                <rect :x="53.5 + index*62" :y="item.y-13" width="46" height="16" stroke="none" stroke-width="0"
                  fill-opacity="0" fill="#ffffff"></rect><text text-anchor="middle" :x="76 + index*62" :y="item.y-15"
                  font-family="Arial" font-size="14" stroke="none" stroke-width="0" fill="#59b35a">{{ item.netRake
                  }}</text>
                <rect :x="56 + index*62" y="144" width="40" height="14" stroke="none" stroke-width="0" fill-opacity="0"
                  fill="#ffffff"></rect>
              </g>
            </g>

          </g>
        </g>
        <g></g>
      </svg>
    </div>



    <h2>Full Rake Comparison</h2>

    <!-- Lựa chọn phía trên -->
    <div class="options">
      <!-- Tabs -->
      <div class="tabs">
        <div @click="handleClicktype2(item)" v-for="item in listtype2" :key="item"
          :class="type3 ==item ?'active tab':'tab'">{{object[item]}}</div>

      </div>

      <!-- Players -->
      <div class="players">
        <span>Players:</span>
        <button @click="handleClick2(item)" v-for="item in listplayers" :key="item"
          :class="players2 ==item ?'active':''">{{item}}</button>

      </div>

      <!-- Stake -->
      <div class="stake">
        <div class="tabs">
          <div @click="handleClicktype3stake(item)" v-for="item in list_" :key="item"
            :class="dang ==item ?'active tab':'tab'">{{item}}</div>

        </div>
      </div>
    </div>
    <div id="rake_overview" class="">
      <table class="prime-table highlight-first-column rake-overview rake-in-bb">
        <!-- <caption>Online poker rake overview for NLH ({{players2}} players)<br>Green: Top 20% of networks for that limit, Red:
          Bottom 20% of networks for that limit.</caption> -->
        <thead>
          <tr>
            <th>Network \ Limit</th>
            <th>0.05 / 0.10</th>
            <th>0.10 / 0.25</th>
            <th>0.25 / 0.50</th>
            <th>0.50 / 1.00</th>
            <th>1.00 / 2.00</th>
            <th>2.50 / 5.00</th>
          </tr>
        </thead>
        <tbody>

          <tr v-for="item in datafullrake" :key="item.name">
            <td class="rake-overview-network">
              <div class="prime-network-logo-name"><a href="https://www.primedope.com/to-888">{{item.name}}</a></div>
            </td>
            <!-- rake-overview-net-rake neutral-background   neutral-background-->

            <td v-if="dang=='Rake / 100 hands'" v-for="element in item.network" class="column neutral-background">
              <span class="rake-overview-currency">{{element.data.currency}} </span>
              <span class="rake-overview-bb">({{ element.data.bigBlinds }} BB)</span>
            </td>
            <td v-if="dang=='Net Rake'" v-for="element in item.network"
              class="rake-overview-net-rake neutral-background">
              {{ element.data.netRake }}
            </td>

            <td v-if="dang=='Formal Rake'" v-for="element in item.network" class="column neutral-background">
              <span class="rake-overview-percentage">
                {{ element.data.rakePercentage }}</span>
              <span class="rake-overview-cap">{{ element.data.rakeCap }}</span>
            </td>
          </tr>


        </tbody>
      </table>
    </div>
  </div>
</body>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<!-- Khởi tạo app Vue -->
<script>
  const { createApp } = Vue;

  createApp({
    data() {
      return {
        players: 6,
        players2: 6,
        dang: "Rake / 100 hands",
        list_: ["Rake / 100 hands", "Net Rake", "Formal Rake"],
        selectedRake: 50,
        limit: "",
        type: "NHL",
        type3: "NHL",
        object: {
          "NHL": "NHL",
          "PLO": "PLO",
          "FF": "Fast Fold",
          "SD": "Short Deck"
        },
        data: [],
        datafullrake: [],
        listtype2: ["NHL", "PLO", "FF", "SD"],
        listtype: ["NHL", "PLO", "FF", "SD"],
        listlimit: [],
//         #0f8181
// #139f9f
// #cbd902
// #d9d902
// #ffa600
// #ffa600
        listplayers: ["2", "3", "4", "5", "6", "7", "8", "9"],
        rakeOptions: [
          { value: "2", text: "0.01-0.02" },
          { value: "5", text: "0.02-0.05" },
          { value: "10", text: "0.05-0.10" },
          { value: "25", text: "0.10-0.25" },
          { value: "50", text: "0.25-0.50" },
          { value: "100", text: "0.50-1.00" },
          { value: "200", text: "1.00-2.00" },
          { value: "500", text: "2.50-5.00" },
          { value: "1000", text: "5.00-10.00" },
          { value: "2000", text: "10.00-20.00" },
          { value: "5000", text: "25.00-50.00" },
          { value: "10000", text: "50.00-100.00" },
          { value: "20000", text: "100.00-200.00" },
          { value: "40000", text: "200.00-400.00" }
        ],
        message: 'Xin chào Vue!'
      }
    },
    methods: {
      reverseMessage() {
        this.message = this.message.split('').reverse().join('');
      },
      handleClicktype3stake(data) {
        this.dang = data
      },
      handleClicktype2(data) {
        this.type3 = data
        this.loadfullrake()
      },
      handleClicktype(data) {
        this.type = data
        this.loaddata()

      },
      handleClick2(data) {
        this.players2 = data
        this.loadfullrake()
      },

      handleClick(data) {
        this.players = data
        this.loaddata()
      },
      test() {
        this.loaddata()
      },
      getBarDimensions(percent) {
        const MAX_PERCENT = 5.0;         // mốc phần trăm cao nhất
        const MAX_HEIGHT = 348.48;       // chiều cao tương ứng với 5%
        const BASE_Y = 424;              // gốc trục y của biểu đồ

        const height = (percent / MAX_PERCENT) * MAX_HEIGHT;
        const y = BASE_Y - height;

        return {
          y: Math.round(y),
          height: Math.round(height)
        };
      },
      loaddata() {
        let loc = this.rakeOptions.filter(e => e.value == this.selectedRake)
        if (loc.length == 0) return
        this.limit = loc[0].text
        let a = this.type + '_' + this.players + "_" + this.selectedRake + "_" + loc[0].text + '.json'
        let url = "https://qc-code.github.io/data/" + a
        fetch(url)
          .then(response => response.json())
          .then(data => {
            let sott=1
            this.data = data.map(e => {
              if (!e.network) {
                e.network = e.operators
              }
              e.chart = e.netRake.replace('%', "")
              e.value = parseFloat(e.chart)
              let kq = this.getBarDimensions(e.chart)
              e.y = kq.y
              e.height = kq.height

              return e
            }).sort((a, b) => a.value - b.value)
            console.log(this.data)
          })
          .catch(error => console.error('Lỗi khi load JSON:', error));
      },
      loadfullrake() {
        let url = "https://qc-code.github.io/data3/" + this.type3 + "_" + this.players2 + ".json"
        fetch(url)
          .then(response => response.json())
          .then(data => {
            this.datafullrake = data
            console.log(this.datafullrake)

          })
          .catch(error => console.error('Lỗi khi load JSON:', error));

      }
    },
    mounted() {
      // Code trong đây chạy sau khi Vue render DOM xong
      // console.log('ajaja', data2)
      //   console.log('Component đã render xong DOM' ,data2);
      this.loaddata()
      this.loadfullrake()
    }
  }).mount('#app');
</script>

</html>